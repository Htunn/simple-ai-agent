# Simple AI Agent - Production Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# Bot Tokens (Required)
# ============================================================================
GITHUB_TOKEN=your_github_token_here
DISCORD_TOKEN=your_discord_token_here
TELEGRAM_TOKEN=your_telegram_token_here
SLACK_BOT_TOKEN=your_slack_bot_token_here
SLACK_SIGNING_SECRET=your_slack_signing_secret_here

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_USER=aiagent
POSTGRES_PASSWORD=change_this_secure_password
POSTGRES_DB=aiagent
POSTGRES_PORT=5432

# Database URL (auto-constructed from above)
DATABASE_URL=postgresql+asyncpg://aiagent:change_this_secure_password@postgres:5432/aiagent

# PostgreSQL Performance Tuning
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_MAXMEMORY=512mb

# ============================================================================
# Application Configuration
# ============================================================================
APP_PORT=8000
LOG_LEVEL=INFO
ENVIRONMENT=production
DEFAULT_MODEL=gpt-4

# MCP (Model Context Protocol) Configuration
MCP_CONFIG_PATH=/app/.mcp-config.json
KUBECONFIG=/app/.kube/config

# ============================================================================
# Performance & Scaling
# ============================================================================
WORKERS=1
MAX_CONNECTIONS=100
RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# Resource Limits (Docker Compose)
# ============================================================================
# Application
APP_CPU_LIMIT=2.0
APP_MEMORY_LIMIT=2G
APP_CPU_RESERVATION=0.5
APP_MEMORY_RESERVATION=512M

# PostgreSQL
POSTGRES_CPU_LIMIT=1.0
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_CPU_RESERVATION=0.25
POSTGRES_MEMORY_RESERVATION=256M

# Redis
REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_RESERVATION=0.1
REDIS_MEMORY_RESERVATION=128M

# ============================================================================
# Debug Tools (Optional - use profile: debug)
# ============================================================================
# Redis Commander
REDIS_COMMANDER_PORT=8081
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=change_this_password

# pgAdmin
PGADMIN_PORT=8082
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=change_this_password

# ============================================================================
# AIOps - Monitoring & Observability
# ============================================================================

# Prometheus
PROMETHEUS_URL=http://prometheus:9090
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=15d
PROMETHEUS_CPU_LIMIT=0.5
PROMETHEUS_MEMORY_LIMIT=512M

# Alertmanager
ALERTMANAGER_PORT=9093
# HMAC secret to validate incoming webhook calls from Alertmanager (optional)
ALERTMANAGER_WEBHOOK_SECRET=change_this_webhook_secret

# Grafana
GRAFANA_PORT=3000
GRAFANA_URL=http://grafana:3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_this_grafana_password
GRAFANA_API_KEY=your_grafana_service_account_token_here
GRAFANA_DOMAIN=localhost
GRAFANA_PLUGINS=
GRAFANA_CPU_LIMIT=0.5
GRAFANA_MEMORY_LIMIT=256M

# ============================================================================
# AIOps - Watchloop & Remediation
# ============================================================================

# Enable the Kubernetes watchloop background poller
K8S_WATCHLOOP_ENABLED=true
# Poll interval in seconds
K8S_WATCHLOOP_INTERVAL=30

# Channel to send AIOps alerts to: format is "channel_type:channel_id"
# Examples: "slack:C01234567" | "telegram:123456789" | "discord:1234567890"
AIOPS_NOTIFICATION_CHANNEL=slack:C01234567

# Enable fully automatic (no-approval) remediation for LOW-risk steps only
# WARNING: set false in production until you have verified your playbooks
AUTO_REMEDIATION_ENABLED=false

# How long (seconds) a pending approval request stays valid before auto-expiry
APPROVAL_TIMEOUT_SECONDS=300

# ============================================================================
# Build Configuration
# ============================================================================
BUILD_DATE=2024-01-01
VCS_REF=main
VERSION=1.0.0

# ============================================================================
# Network Configuration
# ============================================================================
NETWORK_SUBNET=172.25.0.0/16
DATA_DIR=./data

# ============================================================================
# Data Persistence
# ============================================================================
DATA_DIR=./data
